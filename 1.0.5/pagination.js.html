

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Pagination</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="width: 150px">
        <img src="https://cloud.githubusercontent.com/assets/12269563/20029815/01133928-a39a-11e6-80f3-12500a91c755.png" width="100%" height="100%">
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">Pagination</a></h1>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
        <ol class="lnb-tab">
            <li id="api-tab">
                <a href="#"><h4>API</h4></a>
            </li>
            <li id="examples-tab">
                <a href="#"><h4>Examples</h4></a>
            </li>
        </ol>
    
    <div class="lnb-examples hidden"><h3>Examples</h3><ul><li><a href="tutorial-sample1.html">Default Example</a><div class="hidden" id="sample1_sub"></div></li><li><a href="tutorial-sample2.html">CustomEvent Example</a><div class="hidden" id="sample2_sub"></div></li><li><a href="tutorial-sample3.html">Align Center Example</a><div class="hidden" id="sample3_sub"></div></li><li><a href="tutorial-sample4.html">Align Center unit move Example</a><div class="hidden" id="sample4_sub"></div></li></ul></div><div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="Pagination.html">Pagination</a><div class="hidden" id="Pagination_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Pagination.html#movePageTo">movePageTo</a></li><li><a href="Pagination.html#reset">reset</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="Pagination.html#event:afterMove">afterMove</a></li><li><a href="Pagination.html#event:beforeMove">beforeMove</a></li></ul></div></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview Core of pagination component, create pagination view and attach events.
 * (from pug.Pagination)
 * @author NHN entertainment FE dev team(dl_javascript@nhnent.com)
 * @dependency jquery-1.8.3.min.js, code-snippet.js
 */
'use strict';

var View = require('./view.js');

/**
 * Pagination core class
 * @constructor Pagination
 * @param {DataObject} options Option object
 * 		@param {Number} [options.itemCount=10] Total item count
 * 		@param {Number} [options.itemPerPage=10] Item count per page
 * 		@param {Number} [options.pagePerPageList=10] Display page link count
 * 		@param {Number} [options.page=1] page Display page after pagination draw.
 * 		@param {String} [options.moveUnit="pagelist"] Page move unit.
 * 			&lt;ul>
 * 				&lt;li>pagelist : Move page for unit&lt;/li>
 * 				&lt;li>page : Move one page&lt;/li>
 * 			&lt;/ul>
 * 		@param {Boolean}[options.isCenterAlign=false] Whether current page keep center or not
 * 		@param {String} [options.insertTextNode=""] The coupler between page links
 * 		@param {String} [options.classPrefix=""] A prefix of class name
 * 		@param {String} [options.firstItemClassName="first-child"] The class name is granted first page link item
 * 		@param {String} [options.lastItemClassName="last-child"] The class name is granted first page link item
 * 		@param {String} [options.pageTemplate="&lt;a href='#'>{=page}&lt;/a>"]
 * 		                The markup template to show page item such as 1, 2, 3, ..
 * 		                {=page} will be changed each page number.
 * 		@param {String} [options.currentPageTemplate="&lt;strong>{=page}&lt;/strong>"]
 * 		                The markup template for current page {=page} will be changed current page number.
 * 		@param {jQueryObject} [options.$pre_endOn] The button element to move first page.
 * 		                      If this option is not exist and the element that has class 'pre_end',
 * 		                      component do not create this button.
 * 		@param {jQueryObject} [options.$preOn] The button element to move previouse page.
 * 		                      If this option is not exist and the element that has class 'pre',
 * 		                      component do not create this button.
 * 		@param {jQueryObject} [options.$nextOn] The button element to move next page.
 * 		                      If this option is not exist and the element that has class 'next',
 * 		                      component do not create this button.
 * 		@param {jQueryObject} [options.$lastOn] The button element to move last page.
 * 		                      If this option is not exist and the element that has class 'last',
 * 		                      component do not create this button.
 * 		@param {jQueryObject} [options.$pre_endOff] The element to show that preEndOn button is not enable.
 * 		                      If this option is not exist and the element that has class 'pre_endOff',
 * 		                      component do not create this button.
 * 		@param {jQueryObject} [options.$preOff] The element to show that preOn button is not enable.
 * 		                      If this option is not exist and the element that has class 'preOff',
 * 		                      component do not create this button.
 * 		@param {jQueryObject} [options.$nextOff] The element to show that nextOn button is not enable.
 * 		                      If this option is not exist and the element that has class 'nextOff',
 * 		                      component do not create this button.
 * 		@param {jQueryObject} [options.$lastOff] The element to show that lastOn button is not enable.
 * 		                      If this option is not exist and the element that has class 'lastOff',
 * 		                      component do not create this button.
 * @param {jQueryObject} $element Pagination container
 */
var Pagination = tui.util.defineClass(/**@lends Pagination.prototype */{
    init: function(options, $element) {
        var defaultOption = {
            itemCount: 10,
            itemPerPage: 10,
            pagePerPageList: 10,
            page: 1,
            moveUnit: 'pagelist',
            isCenterAlign: false,
            insertTextNode: '',
            classPrefix: '',
            firstItemClassName: 'first-child',
            lastItemClassName: 'last-child',
            pageTemplate: '&lt;a href="#">{=page}&lt;/a>',
            currentPageTemplate: '&lt;strong>{=page}&lt;/strong>'
        };

        this._options = tui.util.extend(defaultOption, options);

        /**
         * Event handler savor
         * @type {Object}
         * @private
         */
        this._events = {};

        /**
         * view instance
         * @type {PaginationView}
         * @private
         */
        this._view = new View(this._options, $element);
        this._view.attachEvent('click', tui.util.bind(this._onClickPageList, this));

        this.movePageTo(this.getOption('page'), false);
    },

    /**
     * Reset pagination
     * @api
     * @param {*} itemCount Redraw page item count
     * @example
     *  pagination.reset();
     */
    reset: function(itemCount) {
        var isExist = tui.util.isExisty((itemCount !== null) &amp;&amp; (!tui.util.isUndefined(itemCount)));

        if (!isExist) {
            itemCount = this.getOption('itemCount');
        }

        this.setOption('itemCount', itemCount);
        this.movePageTo(1, false);
    },

    /**
     * Get options
     * @param {String} optionKey Option key
     * @private
     * @returns {*}
     */
    getOption: function(optionKey) {
        return this._options[optionKey];
    },

    /**
     * Move to specific page, redraw list.
     * Befor move fire beforeMove event, After move fire afterMove event.
     * @api
     * @param {Number} targetPage Target page
     * @param {Boolean} isNotRunCustomEvent [isNotRunCustomEvent=true] Whether custom event fire or not
     * @example
     *  pagination.movePageTo(10); // Move without custom-events - "beforeMove", "afterMove"
     *  pagination.movePageTo(10, false) // Move with custom-events - "beforeMove", "afterMove"
     */
    movePageTo: function(targetPage, isNotRunCustomEvent) {
        targetPage = this._convertToAvailPage(targetPage);
        this._currentPage = targetPage;

        if (!isNotRunCustomEvent) {
            /**
             * Fire 'beforeMove' event(CustomEvent)
             * @api
             * @event Pagination#beforeMove
             * @param {componentEvent} eventData
             * @param {Number} eventData.page Target page
             * @example
             * paganation.on("beforeMove", function(eventData) {
             *      var currentPage = eventData.page;
             *      return false;
             *      //return true;
             * });
             */
            if (!this.invoke('beforeMove', {page: targetPage})) {
                return;
            }
        }

        this._paginate(targetPage);

        if (!isNotRunCustomEvent) {
            /**
             * Fire 'afterMove'
             * @api
             * @event Pagination#afterMove
             * @param {componentEvent} eventData
             * @param {Number} eventData.page Moved page
             * @example
             * paganation.on("afterMove", function(eventData) {
             *      var currentPage = eventData.page;
             *      console.log(currentPage);
             * });
             */
            this.fire('afterMove', {page: targetPage});
        }
    },

    /**
     * Change option value
     * @param {String} optionKey The target option key
     * @param {*} optionValue The target option value
     * @private
     */
    setOption: function(optionKey, optionValue) {
        this._options[optionKey] = optionValue;
    },

    /**
     * Get current page
     * @returns {Number} Current page
     * @private
     */
    getCurrentPage: function() {
        return this._currentPage || this._options.page;
    },

    /**
     * Get item  index from list
     * @param {Number} pageNumber Page number
     * @returns {number}
     * @private
     */
    getIndexOfFirstItem: function(pageNumber) {
        return this.getOption('itemPerPage') * (pageNumber - 1) + 1;
    },

    /**
     * Get Last page number
     * @returns {number}
     * @private
     */
    _getLastPage: function() {
        var lastPage = Math.ceil(this.getOption('itemCount') / this.getOption('itemPerPage'));

        return (!lastPage) ? 1 : lastPage;
    },

    /**
     * Index of list in total lists
     * @param {Number} pageNumber Page number
     * @returns {Number}
     * @private
     */
    _getPageIndex: function(pageNumber) {
        var left, pageIndex;
        // IsCenterAlign == true case
        if (this.getOption('isCenterAlign')) {
            left = Math.floor(this.getOption('pagePerPageList') / 2);
            pageIndex = pageNumber - left;
            pageIndex = Math.max(pageIndex, 1);
            pageIndex = Math.min(pageIndex, this._getLastPage() - this.getOption('pagePerPageList') + 1);

            return pageIndex;
        }

        return Math.ceil(pageNumber / this.getOption('pagePerPageList'));
    },

    /**
     * Get page number of prev, next pages
     * @param {String} relativeName Directions(pre_end, next_end, pre, next)
     * @returns {Number}
     * @private
     */
    /* eslint-disable complexity */
    _getRelativePage: function(relativeName) {
        var page = null,
            isMovePage = this.getOption('moveUnit') === 'page',
            currentPageIndex = this._getPageIndex(this.getCurrentPage());
        if (this.getOption('isCenterAlign')) {
            if (relativeName === 'pre') {
                page = isMovePage ? this.getCurrentPage() - 1 : currentPageIndex - 1;
            } else {
                page = isMovePage ? this.getCurrentPage() + 1 : currentPageIndex + this.getOption('pagePerPageList');
            }
        } else {
            if (relativeName === 'pre') {
                page = isMovePage ? this.getCurrentPage() - 1 :
                                    (currentPageIndex - 1) * this.getOption('pagePerPageList');
            } else {
                page = isMovePage ? this.getCurrentPage() + 1 :
                                    currentPageIndex * this.getOption('pagePerPageList') + 1;
            }
        }

        return page;
    },
    /* eslint-enable complexity */

    /**
     * Get avail page number from over number
     * If total page is 23, but input number is 30 => return 23
     * @param {Number} page Page number
     * @returns {number}
     * @private
     */
    _convertToAvailPage: function(page) {
        var lastPageNumber = this._getLastPage();
        page = Math.max(page, 1);
        page = Math.min(page, lastPageNumber);

        return page;
    },

    /**
     * Create require view set, notify view to update.
     * @param {Number} page Page number
     * @private
     */
    _paginate: function(page) {
        var viewSet = {};

        // 뷰의 버튼 및 페이지를 모두 제거 및 복사
        this._view.empty();

        viewSet.lastPage = this._getLastPage();
        viewSet.currentPageIndex = this._getPageIndex(page);
        viewSet.lastPageListIndex = this._getPageIndex(viewSet.lastPage);
        viewSet.page = page;

        this._view.update(viewSet, page);
    },

    /**
     * Pagelist click event hadnler
     * @param {JQueryEvent} event Event object
     * @private
     */
    /* eslint-disable complexity */
    _onClickPageList: function(event) {
        var page = null,
            targetElement = $(event.target),
            targetPage,
            isFired;

        event.preventDefault();

        if (this._view.isIn(targetElement, this.getOption('$pre_endOn'))) {
            page = 1;
        } else if (this._view.isIn(targetElement, this.getOption('$lastOn'))) {
            page = this._getLastPage();
        } else if (this._view.isIn(targetElement, this.getOption('$preOn'))) {
            page = this._getRelativePage('pre');
        } else if (this._view.isIn(targetElement, this.getOption('$nextOn'))) {
            page = this._getRelativePage('next');
        } else {
            targetPage = this._view.getPageElement(targetElement);

            if (targetPage &amp;&amp; targetPage.length) {
                page = parseInt(targetPage.text(), 10);
            } else {
                return;
            }
        }

        /**
         Fire 'click' custom event when page button clicked
         @param {componentEvent} eventData
         @param {String} eventData.eventType Custom event name
         @param {Number} eventData.page Page to move
         @param {Function} eventData.stop Stop page move
         **/

        isFired = this.invoke('click', {'page': page});
        if (!isFired) {
            return;
        }

        this.movePageTo(page);
    }
    /* eslint-enable complexity */
});
// CustomEvent  Mixin
tui.util.CustomEvents.mixin(Pagination);

module.exports = Pagination;
</code></pre>
        </article>
    </section>




</div>

<footer>
    <img class="logo" src="https://cloud.githubusercontent.com/assets/12269563/20029815/01133928-a39a-11e6-80f3-12500a91c755.png" style="width: 150px">
    <div class="footer-text">NHN Entertainment. Frontend Development Lab</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var element = document.getElementById(id); // do not use jquery selector

        $(element).removeClass('hidden');
        showLnbApi();
    </script>

</body>
</html>
